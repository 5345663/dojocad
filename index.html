<html xmlns="http://www.w3.org/1999/html">
<!-- Full disclosure: JavaScript is not my forte and neither is CSS. -B -->
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<!-- basically remove all user-scaling options and make the viewport size match the screen size on touch screens -->
<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<head>
    <title>Warframe DojoCAD</title>
</head>
<meta name="application-name" content="Warframe DojoCAD"/>
<meta name="author" content="Buff00n"/>
<meta name="keywords" content="warframe,dojocad,clan,dojo,layout,designer,planner,builder,mobile"/>
<meta name="description" content="A mobile-friendly tool for designing a Warframe Clan Dojo layout and accounting for constraints like energy, capacity, room boundaries, prerequisites, and multiple floors"/>
<meta name="generator" content="Hands 1.0"/>
<!-- embedded favicon because why not -->
<link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAANH5AADR+QGceVN3AAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAetJREFUeNqMkz+oklEYxp8jtw8xMVEX+fyzhAjdJkN0aHBICEIiPt2dBBFB3CJwsLi7qJuTOCjOYZAUOElg1JVMhwvaouXQDUoT8Wnxky+vdT3wDO857/M7vO97jiCJI5Z3PB4r8/lcdrvdH202WxPANwAAyf9quVw+SqfT3y0WCyVJotPpZKFQ+EzylCT2kx/W6/XX+Xz+U6PReEkykUqlpgC4r2w2+5XkHa35SSgU+ivJ4/HQbDbvYlmWORwOC5PJJFWtVt+2Wq13KuBBqVR6f+gmrVwuF1er1eOt58ZmszkFSVxcXDyLRCK/ZFlmrVbrybL8T0iz2XylLRsk0ev1zqLRKLvdbpGkLpPJfDlkNplMVBTlN0lZBegAYL1em8Ph8A+/3/8cwCYYDJ7vz1Gv1yMWi2E2m0kATOq+2JLukrTpdLo3ADAej596vd4XDocDkiQBAJLJJPr9PoQQ03K5fBvATwA4AQAhxLkQQoWarFarFAgEMBqNkEgkYLfb0el00G630el0zlTzoYd0L5fLTY1G465uIQSFEATAeDxOkvevNFFVpVLpXjfKYrH4QevRafokDYdD+bpPMRgM7ABuqrEWgCM/ltjqKuDIpZaD3RTUA5/Pd6koyi2DwbA+5FwsFid+v/9SC/gzAD0ZXxYwq1doAAAAAElFTkSuQmCC" rel="icon" type="image/png" />
<style type="text/css">
    /* z-index groups:
        0: body, grid
        100x: background rooms not on the current floor
        200x: foreground rooms on the current floor
        300x: headers, footers, sidebars
        400x: menus
        500x: help
    */

    /* common formatting */

    * {
        font-family: sans-serif;
        color: #A0A0C0;
        touch-action: manipulation;
    }

    /************************************************************
     * key element formatting
     ************************************************************/

    /* remove borders from the body */
    body {
        padding: 0;
        border: 0;
    }

    /* remove borders from the body and document, disable scrollbars */
    html, body {
        margin: 0;
        height: 100%;
        overflow: hidden
        overflow-anchor: none;
        /*
        position: fixed;
        width: 100vw;
        height: 100vh;
        @supports (-webkit-appearance:none) {
            height: calc(var(--vh100, 100vh) - 200px);
        }
        */

      /* Hide scrollbar for IE and Edge */
      -ms-overflow-style: none;
      /* Hide scrollbar for Firefox */
      scrollbar-width: none;
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    html::-webkit-scrollbar, body::-webkit-scrollbar {
      display: none;
    }

    /* grid div, fill the window with no border and add a repeating background image.
       the position of the image is changed as the background is dragged */
    #grid {
        position: absolute;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        padding: 0;
        border: 0;
        background-image: url("img5x/bg-grid.png");
        background-repeat: repeat;
        background-position: 0px 0px;
        background-size: 160px 160px;
    }

    /* floating header at the top */
    #header {
        background-color: #303050;
        position: absolute;
        left: 0ex;
        top: 0ex;
        margin: 0;
        padding: 1ex 1ex;
        border-radius: 1ex;
        z-index: 305;
    }

    /* floating footer at the bottom */
    #footer {
        background-color: #303050;
        position: absolute;
        bottom: 0ex;
        right: 0ex;
        max-width: 75ex;
        margin: 0;
        padding: 1ex;
        border-radius: 1ex;
        z-index: 308;
    }
    /* All the footer stuff was moved to the Help section to save screen real estate
    #footerToggle {
        cursor: pointer;
    }
    #footerHidden {
        display: none;
    }
    */

    /* floating stats bar at the bottom */
    #statsBar {
        background-color: #303050;
        position: absolute;
        bottom: 0ex;
        left: 0ex;
        margin: 0;
        padding: 1.5ex 1ex;
        border-radius: 1ex;
        z-index: 308;
    }

    /* floating sidebar */
    #sidebar {
        background-color: #303050;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 0ex;
        margin: 0;
        padding: 0ex 0ex;
        border-radius: 1ex;
        z-index: 308;
    }

    /* floating right sidebar, hidden by default */
    #rightSidebar {
        background-color: #303050;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        right: 0ex;
        margin: 0;
        padding: 0ex 0ex;
        border-radius: 1ex;
        z-index: 308;
        display: hidden;
    }

    /* floating help container, fills the right side up to a max width */
    #help {
        background-color: #303050;
        position: absolute;
        right: 2ex;
        top: 8ex;
        bottom: 8ex;
        max-width: 75ex;
        margin: 0 0 0 2ex;
        padding: 2ex;
        border-radius: 1ex;
        visibility: hidden;
        z-index: 500;
    }

    /* absolutely position the help show/hide button in the upper right corner */
    #helpToggle {
        position: absolute;
        right: 0ex;
        top: 0ex;
        z-index: 501;
    }

    /* help box fills the help container and contains its own scrollbar */
    .helpBox {
        height: 100%;
        /* need to take 3ex off for the 'top' link */
        height: calc(100% - 3ex);
        border-radius: 1ex;
        background: #000000;
        overflow: auto;
        overflow-anchor: none;
    }
    .helpContainer {
        padding: 1ex;
        overflow-anchor: none;
    }

    /************************************************************
     * help section formatting
     ************************************************************/

    h1, h2, h3, h4 {
        color: A0C0F0;
    }
    strong {
        color: 6080B0;
    }
    .warn, .warn * {
        color: D06040;
    }
    a, a i {
        color: #8080FF
    }
    a:visited, a:visited i {
        color: #D080FF
    }
    ul {
        list-style-type: disc;
    }
    li {
        margin: 0;
    }
    .title {
        color: #6080B0;
        font-size: 300%;
        font-variant: small-caps;
        font-weight: bold;
    }
    .helpTop {
        text-align: right;
        padding: 0 0 1ex 0;
    }

    /************************************************************
     * button/menu formatting
     ************************************************************/

    .button, .button-disabled, .button-error, .button-clear {
        margin: 0.5ex;
        border: none;
        padding: 0.5ex;
        text-align: center;
        text-decoration: none;
        font-size: 100%;
        border-radius: 1ex;
        user-select: none;
    }

    .button, a.link-button {
        cursor: pointer;
        background-color: #7070A0;
        color: #FFFFFF;
    }

    .button-disabled {
        background-color: #303050;
        color: #808080;
    }

    .button-disabled > img {
        filter: saturate(0%) brightness(50%);
    }

    .button-error {
        cursor: pointer;
        background-color: #802020;
        color: #FFFFFF;
    }

    #header .button, #header .button-disabled {
        margin: 1ex;
        padding: 1ex;
    }

    .docButton, .docButton-error, .docImgButton, .docImgButton-error, .docImgButton-clear {
        border: none;
        text-decoration: none;
        font-size: 100%;
        border-radius: 0.5ex;
    }

    .docButton {
        margin: 0;
        padding: 0.1ex 0.5ex;
        background-color: #7070A0;
        color: #FFFFFF;
    }

    .docButton-error {
        margin: 0;
        padding: 0.1ex 0.5ex;
        background-color: #802020;
        color: #FFFFFF;
    }

    .docImgButton {
        margin: 0;
        padding: 0.5ex 0.5ex;
        background-color: #7070A0;
        color: #FFFFFF;
    }

    .docImgButton-error {
        margin: 0;
        padding: 1ex 0.5ex;
        background-color: #802020;
        color: #FFFFFF;
    }

    .docImgButton-clear {
        margin: 0;
        padding: 1ex 0;
    }

    .button > img, .button-disabled > img, .button-error > img, .button-clear > img,
    .docImgButton > img, .docImgButton-error > img, .docImgButton-clear > img,
    .field > img, .field-error > img,
    .menu-button > img, .menu-button-error > img, .menu-button-clear > img {
        display: inline-block;
        vertical-align: middle;
    }

    .docImgButton > img, .docImgButton-error > img , .docImgButton-clear > img {
        transform: scale(0.75, 0.75);
    }

    .label {
        color: #FFFFFF;
        user-select: none;
    }

    .field, .field-error {
        margin: 1ex 1ex 1ex 1ex;
        border: none;
        padding: 1ex;
        text-align: center;
        text-decoration: none;
        font-size: 100%;
        border-radius: 1ex;
    }

    input, textarea {
        background-color: #101020;
        border: none;
        color: #D0D0F0;
        padding: 1ex;
        border-radius: 1ex;
    }
    input:invalid {
        background: #801010;
    }

    .field, .imgField {
        background-color: #202030;
        color: #FFFFFF;
    }

    .field-error {
        background-color: #B02020;
        color: #FFFFFF;
    }

    td.field {
        margin: 0;
        padding: 0ex, 0.5ex;
        border: 0;
    }

    td.imgField {
        margin: 0;
        padding: 0ex, 0ex;
        border: 0;
        border-radius: 1ex;
    }

    .menu-table, .menu-table-error, .menu-table-warn {
        margin: 1ex 1ex 1ex 1ex;
        color: #FFFFFF;
        border: none;
        padding: 0;
        margin: 0;
        border-spacing: 1ex;
        border-collapse: separate;
        text-decoration: none;
        font-size: 100%;
        border-radius: 1ex;
        position: absolute;
        user-select: none;
        z-index: 400;
        box-shadow: 0 0 3px 3px #000000;
    }

    .menu-table {
        background-color: #303050;
    }

    .menu-table-error {
        background-color: #402020;
    }

    .menu-table-warn {
        background-color: #808000;
        color: #000000;
    }

    .menu-button, .menu-button-error, .menu-button-warn {
        margin: 1ex 1ex 1ex 1ex;
        border: none;
        padding: 1ex;
        text-align: center;
        text-decoration: none;
        font-size: 100%;
        border-radius: 1ex;
        cursor: pointer;
    }

    .menu-button-clear {
        margin: 0ex;
        border: none;
        padding: 0ex;
        text-align: center;
        text-decoration: none;
        font-size: 100%;
        border-radius: 1ex;
        cursor: pointer;
    }

    .clickable {
        cursor: pointer;
    }

    .menu-button {
        background-color: #7070A0;
        color: #FFFFFF;
        user-select: none;
    }

    .menu-button-error {
        background-color: #802020;
        color: #FFFFFF;
    }

    .menu-button-warn {
        background-color: #B0B020;
        color: #000000;
    }

    .menu-divider {
        margin: 1ex 1ex 1ex 1ex;
        background-color: #202030;
        padding: 1ex;
        border-radius: 1ex;
    }

    .imgButton {
        cursor: pointer;
    }

    .menu-table-error tr td.field, .menu-table-error tr td.imgField  {
        background-color: #381818;
    }

    .menu-table-warn tr td.field, .menu-table-warn tr td.imgField  {
        background-color: #707000;
        color: #000000;
    }

    /************************************************************
     * elevator formatting
     ************************************************************/

    .floor-button, .floor-button-selected, .floor-button-error, .floor-button-error-selected, .floor-button-empty, .floor-button-empty-selected {
        margin: 0.5ex;
        border: none;
        padding: 1ex;
        text-align: center;
        text-decoration: none;
        font-size: 100%;
        border-radius: 1ex;
        user-select: none;
    }

    .floor-button {
        cursor: pointer;
        background-color: #202030;
        color: #7070A0;
    }

    .floor-button-selected {
        background-color: #505080;
        color: #FFFFFF;
    }

    .floor-button-error {
        cursor: pointer;
        background-color: #802020;
        color: #7070A0;
    }

    .floor-button-error-selected {
        background-color: #F02020;
        color: #FFFFFF;
    }

    .floor-button-empty {
        cursor: pointer;
        background-color: #303050;
        color: #7070A0;
    }

    .floor-button-empty-selected {
        background-color: #303050;
        color: #FFFFFF;
    }

    #header .button, #header .field, #header .button-error, #header .button-clear, #header .button-disabled,
    #statsBar .button, #statsBar .field, #statsBar .button-error, #statsBar .button-disabled {
        margin: 0ex;
    }

    /************************************************************
     * multiselect formatting
     ************************************************************/

    .multiselectBox {
        position: absolute;
        border-style: dashed;
        border-width: 2px;
        z-index: 499;
        pointer-events: none;
        border-color: #00FF00;
    }

    /************************************************************
     * error/debug formatting
     ************************************************************/

    #errorBar {
        background-color: #B00000;
	    font-weight: bold;
	    text-align: left;
	    color: #FFFFFF;
        position: absolute;
        left: 10ex;
        right: 2ex;
        top: 10ex;
        margin: 0;
        padding: 2ex;
        border-radius: 1ex;
        z-index: 307;
    }

    #debugBar {
        background-color: #0000B0;
	    font-weight: bold;
	    text-align: left;
	    color: #FFFFFF;
        position: absolute;
        left: 10ex;
        right: 2ex;
        bottom: 10ex;
        margin: 0;
        padding: 2ex;
        border-radius: 1ex;
        z-index: 307;
        visibility: hidden;
    }

    #errorBar *, #debugBar * {
	    color: #FFFFFF;
    }

    .debugBounds, .debugOverlapBounds, .debugDoorBounds, .debugOverlapDoorBounds {
        position: absolute;
        border-style: solid;
        border-width: 1px;
        z-index: 299;
        pointer-events: none;
    }
    .debugBounds {
        border-color: #0000FF;
    }
    .debugOverlapBounds {
        border-color: #FF00FF;
    }
    .debugDoorBounds {
        border-color: #00FF00;
    }
    .debugOverlapDoorBounds {
        border-color: #FFFF00;
    }

    .matrix-table {
        color: #FFFFFF;
        background-color: #202030;
        border: none;
        padding: 1ex;
        margin: 1ex;
        border-collapse: collapse;
        text-decoration: none;
        font-size: 100%;
        position: absolute;
        z-index: 400;
    }

    .matrix-table tr td, .matrix-table tr th {
        border: 1px solid #404040;
    }

    .matrix-error {
        background-color: #802020;
    }

</style>
<!-- imported libs -->
<script type="text/javascript" language="javascript" src="js/lib/lz-string.js" ></script>
<!-- internal libs -->
<script type="text/javascript" language="javascript" src="js/room-metadata.js" ></script>
<script type="text/javascript" language="javascript" src="js/util.js"></script>
<script type="text/javascript" language="javascript" src="js/model.js"></script>
<script type="text/javascript" language="javascript" src="js/rules.js"></script>
<script type="text/javascript" language="javascript" src="js/undo.js"></script>
<script type="text/javascript" language="javascript" src="js/main.js"></script>
<script type="text/javascript" language="javascript" src="js/events.js"></script>
<script type="text/javascript" language="javascript" src="js/elevator.js"></script>
<script type="text/javascript" language="javascript" src="js/menus.js"></script>
<script type="text/javascript" language="javascript">

    /************************************************************
     * Dynamic panels
     ************************************************************/

    function toggleHelp() {
        var help = document.getElementById("help");
        var helpToggle = document.getElementById("helpToggle");

        if (help.style.visibility == "visible") {
            help.style.visibility = "hidden";
            helpToggle.innerHTML = '<img src="icons/icon-help.png" srcset="icons2x/icon-help.png 2x" title="Show Help"/>';
            removeUrlAnchor();

        } else {
            help.style.visibility = "visible";
            helpToggle.innerHTML = '<img src="icons/icon-close.png" srcset="icons2x/icon-close.png 2x" title="Close Help"/>';
        }
    }

    function toggleFooter() {
        if (window.event && window.event.altKey) {
            // Shhh super secret debug mode don't tell anyone okay
            toggleDebug();
            return;
        }
    }

    function toggleDebug() {
        if (debugEnabled) {
            debugEnabled = false;
            setModelDebug(false);
            showDebug("Debug: off");
            hideDebug();
			removeUrlQueryParam("m");
            removeUrlQueryParam("debug");
			saveModelToUrl();

        } else {
            debugEnabled = true;
            setModelDebug(true);
            showDebug("Debug: on");
			removeUrlQueryParam("mz");
            modifyUrlQueryParam("debug", "true");
			saveModelToUrl();
        }

        enableAutoScrollDebug(debugEnabled);
    }

    /************************************************************
     * Error and debug bars
     ************************************************************/

    function windowOnError(msg, url, lineNo, columnNo, error) {
        var html = url + ": " + lineNo + ":" + columnNo + "<br/>";
        var html = html + msg.replace("Uncaught ", "");
        showError(html);
        return false;
    }

    function showError(html) {
        clearMenus();
        var errorBarElement = document.getElementById("errorBar");
        errorBarElement.innerHTML = html;
        errorBarElement.style.visibility = "visible";

        return false;
    }

    function clearErrors() {
        // find the error bar and clear it out
        var errorBarElement = document.getElementById("errorBar");
        if (errorBarElement.style.visibility != "hidden") {
            errorBarElement.innerHTML = "";
            errorBarElement.style.visibility = "hidden";
        }
    }

    var debugCount = 0;
    var maxDebugLines = 5;

    function showDebug(html) {
        var debugBarElement = document.getElementById("debugBar");

        while (debugBarElement.childElementCount >= maxDebugLines) {
            debugBarElement.firstElementChild.remove();
        }
        var div = document.createElement("div");
        debugCount++;
        div.innerHTML = debugCount + ". " + html;
        debugBarElement.appendChild(div);

        debugBarElement.style.visibility = "visible";
    }

    function hideDebug() {
        var debugBarElement = document.getElementById("debugBar");

        debugBarElement.style.visibility = "hidden";
    }

    /************************************************************
     * init
     ************************************************************/

    function init() {
        /*
        var vh = window.innerHeight - 34;
        var declaration = document.styleSheets[0].cssRules[0].style;
        declaration.setProperty("--vh100", vh + "px");
        */

        // set up the error listener
        window.onerror = windowOnError;

        onresize();

        // we have to do this with addEventListener() instead of directly on the <div> so we can tell stupid Chrome that
        // none of these event handlers are passive
        var grid = document.getElementById("grid");
        grid.addEventListener("mousedown", mouseDown, { passive: false });
        grid.addEventListener("wheel", wheel, { passive: false });
        grid.addEventListener("touchstart", touchStart, { passive: false });
        grid.addEventListener("touchcancel", touchCancel, { passive: false });

        // javascript is working
        clearErrors();

        // init the model
        initModel();


        if (window.location.href.indexOf("#") > 0) {
            toggleHelp();
        }

        if (getQueryParam(window.location.href, "debug") == "true") {
            toggleDebug();
        }
    }

    function onresize() {
        var h = Math.max(document.documentElement.clientHeight, window.innerHeight);
        var w = Math.max(document.documentElement.clientWidth, window.innerWidth);
        windowSizeChanged(h, w);
    }

    function onScroll() {
        // huge freaking hack for Chrome:
        // when you click on a link inside the Help section Chrome scrolls the page, on both mobile and desktop versions.
        // I tried very hard to find a "correct" way to fix this, but nothing worked.
        // This also appears to fix a few auto-scroll issues when switching floors to a floor with rooms off the bottom
        // of the screen in ther browser.

        // So here we are, listening for scroll events and negating them manually.  We're fine, we're all fine here.  How are you?
        document.body.scrollTo(0, 0);
    }

</script>
<body onload="init()" onkeydown="keyDown()" onkeyup="keyUp()" onscroll="onScroll()" onresize="onresize()">

<!-- Grid background -->
<div id="grid"></div>

<!-- Container for room elements -->
<div id="roomContainer"></div>

<!-- floating header bar -->
<div id="header">
    <span id="burgerButton" class="button" onclick="doBurgerMenu(this)"><img src="icons/icon-burger.png" srcset="icons2x/icon-burger.png 2x" title="Menu"/></span>
    <span id="addRoomButton" class="button" onclick="doAddMenu(this)"><img src="icons/icon-add.png" srcset="icons2x/icon-add.png 2x" title="Add Room"/></span>
    <span id="undoButton" class="button-disabled" onclick="doUndo(this)"><img src="icons/icon-undo.png" srcset="icons2x/icon-undo.png 2x" title="Undo"/></span>
    <span id="redoButton" class="button-disabled" onclick="doRedo(this)"><img src="icons/icon-redo.png" srcset="icons2x/icon-redo.png 2x" title="Redo"/></span>
    <span id="multiselectButton" class="button-disabled" onclick="doToggleMultiselect(this)"><img src="icons/icon-multiselect.png" srcset="icons2x/icon-multiselect.png 2x" title="Enable Multiselect Mode"/></span>
    <span id="allErrorsButton" class="button-clear" onclick="doShowAllErrors(this)"><img src="icons/icon-ok.png" srcset="icons2x/icon-ok.png 2x" title="OK"/></span>
</div>

<!-- floating sidebar -->
<div id="sidebar">
    <div id="floorUpButton" class="button" onclick="doFloorUp(this)"><img id="floorUpButtonImg" src="icons/icon-up.png" srcset="icons2x/icon-up.png 2x" title="Up"/></div>
    <div id="floorDownButton" class="button" onclick="doFloorDown(this)"><img id="floorDownButtonImg" src="icons/icon-down.png" srcset="icons2x/icon-down.png 2x" title="Down"/></div>
</div>

<!-- right side sidebar -->
<div id="rightSidebar">
    <div id="copyButton" class="button-disabled" onclick="doCopy(this)"><img id="copyButtonImg" src="icons/icon-copy.png" srcset="icons2x/icon-copy.png 2x" title="Copy"/></div>
    <div id="cutButton" class="button-disabled" onclick="doCut(this)"><img id="cutButtonImg" src="icons/icon-cut.png" srcset="icons2x/icon-cut.png 2x" title="Cut"/></div>
    <div id="pasteButton" class="button-disabled" onclick="doCut(this)"><img id="pasteButtonImg" src="icons/icon-paste.png" srcset="icons2x/icon-paste.png 2x" title="Paste"/></div>
</div>

<!-- floating help button in the corner -->
<div id="helpToggle" class="button" onclick="toggleHelp()"><img src="icons/icon-help.png" srcset="icons2x/icon-help.png 2x" title="Show Help"/></div>

<!-- floating error bar -->
<div id="errorBar">
    Javascript must be enabled
</div>

<!-- floating help window, hidden by default -->
<div id="help">
    <div class="helpTop">
        <a class=".top" href="#TOC">top</a>
    </div>
    <!-- getting padding and sizing correct requires two wrapper divs -->
    <div class="helpBox">
        <div class="helpContainer">
            <p style="text-align: center;">
                <span class="title">DojoCAD</span><br/>
                v1.5.0: 2020-10-29<br/>
                <a href="https://github.com/buff0000n/dojoarch">Source</a>&nbsp;
                <a href="https://github.com/buff0000n/dojoarch/issues/2">Feedback</a>&nbsp;
                <a href="https://github.com/buff0000n/dojocad/issues/new">Bugs</a><br/>
                Contact:
                <a href="https://forums.warframe.com/messenger/compose/?to=1331202">Forums</a>&nbsp;
                <a href="https://www.reddit.com/user/buff0000n">Reddit</a>&nbsp;
                <a href="https://www.youtube.com/c/Buff00n">YouTube</a>&nbsp;
                <a href="https://github.com/buff0000n/dojocad/issues/new">git</a>
            </p>

            <p>Thanks: <a href="https://www.reddit.com/user/AeliosZero">AeliosZero</a></p>

            <h1>What is this?</h1>
            <p>
                This is a tool for planning a valid Warframe Clan Dojo layout.  I've tried to model the in-game
                room boundaries and constraints as accurately as possible.
            </p>

            <h2>Disclaimer</h2>
            <p>
                <strong class="warn">All the room boundaries have been found by in-game experiment, waypoint
                measurement, or straight-up guesswork.</strong>  If you see a problem or if you'd like to help me
                determine bounds and stats for the old, discontinued rooms then please drop me a line!
            </p>

            <h1>Getting started</h1>
            <p>
                The starter <strong>Clan Hall</strong> is already added by default.
            </p>
            <p>
                Click the <span class="docImgButton"><img src="icons/icon-add.png" srcset="icons2x/icon-add.png 2x" title="Add"/></span> button to select a category and room to add.
                Then drag and click where the room should be placed.
            </p>

            <h2 id="Examples">Examples</h2>
            <ul>
                <li>
                    <a href="?v=2,-317,0,0&mz=BYRgNAbALJMAxjgfQE4FNZhCATIsOSAxkZiBPsgPYqYC0IArJcaQMx7kslgCcFXBMnR8KDCkKQAbAC6iwUcAkJSARgSwSwbaezziWUjBwVbCAE3MEoCQVmlVrCBmwAc3WjhuahBIA">
                        Minimal clan dojo
                    </a>
                </li>
                <li>
                    <a href="?v=2,-109,-11,0&mz=BYRgNADJ0Q+sBLMBaEA2FaAs0SwCb5ggDsG2usANgC4oDMATCo-dI9QEZj1TIVQ8VAMYNmqEMyhwqAU2gTpkWAHsATj2akY8JOjADisYRuRMDOKPVhr5gyexvzzIB1A5UVKEjn6WeQA">
                        Goofball minimal clan dojo
                    </a>
                </li>
                <li>
                    <a href="?v=1,34,-60,1&mz=BYRgNADJ0Q+gTgUzAWgMwCZUBYAc01YBjZDfFPVcEYo6C88OJVTHRsQouqSqOYFigBOAGwxYwNNBCj+kYqXx8wNbtEpNJ2aGNULgAVhj64Ae3itwmzrAA2AFxzVx4QneQVxKWfvd1KH1dVewAjMGxXYJo7M1RDfFwoN1p6Xx8FFnQsIKpbFjZcjLUeVW8tABMKtOEsLSIAD3obOCJLSiT9GgqAV3ZVEDrbMwBDaAwAdh1wDFgAczswUWm5U1gHYBlVrQXUZbLkhVHUDGw67fzPNnSUgvO8ko0OczoQYRXDmmAAS3HTiR+Sx0GAg+GSkl+KH2ILBIWOUDQaFhszmAGcqGQwDCJBsMfhZPI4GjVJjsfx1ptBvjVuTiShOgSJER0T4IMDQTJ5uiGTSFMzVGysRzwVk2IFbsgxRxHlBOhkiYsfKTDOJaYsqViVRIzOENWhRMjYDq8ZwDeN5oqQBNxGSFLsrTbhZkrlg5RLOK6oMVUslBnlWp4NSBfGqTYytLiGBFYXBcZ0VETuclMbSk2A9KGNRm7eiHenVc6PQMctQEC7i3kuKUQNgdPKuaprQcJMS8xrU1Qm4zQz4m9nE6gGSmc4ORAXmJK6rWHmXWFO6yl1Mkm-WiE5NLzWuv8cOt-1u1jiE4o+3D2v+tnZkRwpR+8Qb-gMFqEUewJ0nwWuOEox-zef6VAv4vv+wZYNmajfqBJKwlwLIgPq+acvyvauAhgENnmQEjihmrjve0HRkh34JiE16jiYsHkSg-zoWRAH9OCjSduICbEE0OEhny7F5rk5JMThUZ8dxfqCaRkHTqJX5UBJnSMZBK6yVxb6EoW2SNuUthLkKzxsepQJMk0eZsEJemErpPHGXyuYrs+Z5ptROi0eEcqsUxUGiRBqgSSoV66gp8ieTWdaKa0pSnF6WihOA6DshwhBRawwLYBFtgJWgSUpTQaWxTO55eioIBAA">
                        Maximal clan dojo
                    </a>
                </li>
                <li>
                    <a href="?v=2,-29,14,0&mz=BYRgNADJ0Q+gTgUzAWgMwCZUBYAc01YBjZDfFPaEY0-Slca4LKKBsDWYNGVFr7L3BwSfOviiEiRaJWEJk6LBXLgpismHpZ1YnPjU0O4sI2IyolfsACsvfgBsALjnAMAbBzCEHi7J5BPHVgHGXpAr2oHACMtAKDTWAB7eBwAdlQIwwck1BsDAO8jFE0rItFNFUijUvwealES8koeKRc2SkEG2n0tRMbavsJgAEteQThR3h4Rdt67JjHWMDsRDWb8O11BhdgnYF5PNb1KT22NsACai5L+nvp64sqH8rntIv3edEhYAHMHaAATkKcH+QIScCSsSgIGwgh4nCIb3IrWIcyq32oSF6bFR2MouMS+PwwNMRL8JMK516FDuJ2ar2gGK6aNkDMIYOWtLg2KqHSKxKZLIGNy21y05F2RAAHmy8olfgBnVCYCXy0HK1UY1bJaGmOFgDKI9HvBoWNU6pIAQyo-hWHFZlnwZ0daoyZqF+H4ABNvUyQICsPwkZ6ydROWBSaxzHLo0q1VGfvGqomNQmIX9lSmM9I5TNXVVHrmOs6flD-QajsRZSXDQqs1rKBk06qm2WbTC7YJEebOj8iKlwoVqN6AK40iKose9SdFadyM6JeeqRfh5Wd7s-XkLoYKCeeeF7od9LHIHcs5PHnWXgr2tM76-Kq-92KqiLu4ixJSZTwZKR699yj1Dw6waL8308FAdSIV9lAiKCHRgqhILsRFgPg6DzT5JMATYVM9zYWEJi3M9yETU8aUTNpQwQwhy0Ig0EJELDwhwplSXYNMMQ4+R43oHik3XTJGN4oSiJgZIOw4EAYQdbcJEuAVSOgK4QydTJvCAA">
                        Thirteen floor clan dojo
                    </a>
                </li>
                <li>
                    <a href="?v=1,-408,-49,0&mz=BYRgNADJ0g+gJvMIBsV3NgYy2AtACwAc062uhJeAzAEynn7Fh0MD2ATviAOwv1Q4OJlRQEGAGwAu+WtXytBjSmDEMOAU3xEoaqNVibtUPHpaxg9PAE4UpTBK14eVReYkUd-aAYkAjblFxJSMbOzwQWhJ9QydbMHiYiTZ8OzM4YHkItHsM8RUIyIZgAFYRZCKyUPiwn1j8eMjo8yMoRMxW5CiYepN2uE6I7qUpYGQc7IwIWFGwWlp81CmZsaiqJYZZ6hKrDbJZglRuHP2x4hM9yBWwEoJFk6vZtHWH6aeeXdfrnmpwy7exjoLl9ZkQ1JNNmNrN0IacEtDjstZiAICU-iCxiBIsCkZiQER7riusxYY9MdQiqSAchqDx0USQHccQwsAAPZBM7iVK5sjkEExeMi8xn88pC9kiwR2cV8qDMGWSsCCnkSzlYgRk8ZSonzcT-a5rLWQlg7I1ww52fUHLxWsa3PUY1QQEi21QfM2an6Wx1Aj3UsEOonQl2O6wI10otF+67q7XGrEE6PIhYhhkU+gRtWOkC073LYR4WjO+zTUILExuAxl0UYKtOcveGJYGSF4s0DW0eqF0WmYLmLBaLH0uoDip57j9wc9jbgISDo4Q+gGUeM5nyOccuOFzBsALq1LicSd5uy44sqcoF4TjeKyn0Y9T6dWeTTFcES-jJg7vfUO6fwj9lwBT6lgAStkEPSgbIxZuMee6ctkE6vvBooLvIy6qqh4R6tge6UhswS4RUGYTEusC7sRqj5AIQA">
                        Just how big <i>is</i> the Dry Dock?
                    </a>
                </li>
                <li>
                    <a href="?v=2,-52,79,0&mz=PYCwjANADNtQ+sAxk2BWKA6NdEtgBwDsuyqMAtBtqQE4CmEAzE5gEw5VY4xiIMQKLdp2o9mecoOJ1YFMGywdcAGwAuENkREQxsPioBGzNjpm94KxkNPK9MJpdRCALGZIP4SRrzDblMGyIIGyCTABsNBGYRDiQCGRhkTgy8V4arjoU5hJIGkxuytkeEgKZRWBgAJy4AgVZlTUwCEgAzoJoBFk5fG26XUU9Xs4Etpw5Laij3SUIZdMV1bXWC6LiQQKrHevwm2OCjbj4lYXjs8MHYKfS53mX1-JLgekQJw1P0BdvFWjxn-iPB5gX5HZzfThgAhMUGvK4NKHLCBbeQgzzzfYov69DLIyHQzwA6gVBHNC7yAYQkn-VBEyn46mvCkHKktDS4qmOFTAV5oSKDEp8EDQoTJQRaHRpZAaGCpV5eRhMJQpEiQXqofYyUIIEKCFxoGLKzRyu4imgUWIS43GChuTgW5SQIJIa3hLp2-UO3IZV1msBQfxxTQvCg+iFMKqWp3et0HIhgSPB20Hf2W1m633h1OJ31xrPeTSsMMRz29axVUXyTOexwAcxUlwrfoDr0+dYbOfjnoQbZchdjncD3fa4ohKa7XhdMYoilY4+d6c4M8t2KSZqX1cQAENV5xFQOWwgACaHsVQfWxJEkUKOYDWxTniFsR2fNQgA7hDETeAgFynjPFnBQkFRduEEe1ANyAAPQRQwOKsIL4ZBXigCNF2bICySTad0OgIA">
                        Example with the old, discontinued rooms.
                    </a>
                </li>
                <li>
                    <a href="?v=1,-1,153,0&mz=BYSwNADGC0BsAslIH0DmAbJ0CMAmAHEhMgPYBOY8A7DHoVNsgCYCuM8hOBSAzMgC7As2AJy4iaTHEQ4xEjGAS05UYgrrLxqyWA1d6KBfs3ypejdtC1u0iVb1LtZAKa0qsGPlVg+Ltx+gOXmQ-L09vX1cwwINI8PiGENdoaKDEv2x3BN0k3SyYpEYFb210fnZsbL50ZPgAtJ9kdABjSk4wxPQAI0p6g0Z0EjAAVgNE5ooCiJ0oR0MpJTm1M24lnUXEbXVVzfndbhKdY0PgLRhcYY9LHkKDlCYmLHhsK5QSHqhceG9cUlboC6EOZ8EgAQzAX3Ec0Yfls2DwSF+sI08LOSNcSlRiNyKIRn1ySgB3wksMJXxOiFE4mOOWAwxMNMYwGSLyggRehWQzPOXwqryZyQInGe-K5yR4w2pIs53PZ9Q5iVlHDZ0sVyWG8BkqtpyVgEGFCp1MFgVClhoFMCoPHlou5rL5MtcuF5csdEPwBttrglZq9lA5rrVbRV5rFI01DqDes9bpNvrdVptbq8Ib9+EJ2otYhjQZEckDRuwEEukcLeFTbvh+C1obtXxzhZ4CILFuwPHymbDKQgFaDKQzteS2dLFugefjfaLJZbXdRvaNOGw1ZHs-rK9lbebnY37aT6RZEcCawyh7qu2IJ5k1oM6Noh+v2JIAGdzsToMMeIdn+wezAP1+X3fPU-0-CRv2gU02X-MDAI9KDQO0cCizfaDEMA8t4IA2hrUwmCIRQhC3hfb5cLQkZgPfQjiG-SCQKwuC6Lw5DSKI-Zf0orC2wo1DWPJGBPzRUhiPYgTHxfS42VE-EaNwSSIEE78GOgKSISE3QIDfFTfm-DD+PksTdBwvSFMAvjlP06TAJI4yDKAuSTMtWSbMszxoi0tScA0+zbN08yHJwIy-MRIA">
                        Ideal decorator's dojo
                    </a>
                    (thanks <a href="https://www.youtube.com/watch?v=lOXrHP3Y0zs">Vash</a>)
                </li>
                <li>
                    <a href="?v=2,-30,87,0&mz=BYRgNAzATJMAxhAfQMYrADgdMC6vS12PzUwQDYAWEpYGAWhxwWWAkQu3kSQHMAzohAwWuJACcApsJ6tJMkCLDVibGkSVy6AVnJgGVDLRQAPRFGNMeyMxeMBOCsQj8ANvpAB2Z3ndgoKBoxWyFAmgZjPxQwoLAvbRiA1RD+WIixfEEAnWdrWmzLK0y0gIwogrDy2Eqy41U-QuqnWqhcsBbG9I7fcWyQBxhOvqEQLh7aYABLRB8DI1ppALiGBvElooNh5A3q1Zo-NxkIDJ5XN3QcfZckNwAjCzy15DcAe2WJ7CQAF2At5xK2QYICowW0fA8DBa+T8S2BoJI6xk8JoaygSFeAEMDEFRGdUOYoXkiF19OECh4iFAErUiNA8H1KdgKBVSBIat5eq4ACbc-QMKBwVn+IkGETClCKQYqKzgUjmAZDPJygk5ZwtFWStUy2jcgCuYoRMMgBH+Yrm0WRLPNyt4WqhjE5OJNdmuwLmAt4r3ZEA44puQJaJJGZq0tFe6FFgV66KWC3JXzIooFVAZpCtViCDNsyOlKdYLozONTATtucYWcgLsJqnzYBothrEUFFVs3zNAqFi2OMGp+LjxnpN3tIIiIHawPEI6NIDgDPR07HV17qGRo7FcRVS2Y1q+cP9Ya+QPXwMs4aEKcdZ6PYQnayyt7ywwf2tPwt2suvvA2K39e5k5Kil8bjtjoegMq4rwPJsnatkAA">
                        My actual clan dojo
                    </a>
                </li>
            </ul>

            <h1 id="TOC">Table of Contents</h1>
            <ul>
                <li><a href="#KeyboardShortcuts">Keyboard shortcut cheat sheet</a></li>
                <li>
                    <a href="#Navigation">Navigation</a>
                    <ul>
                        <li><a href="#Xooming">Zooming</a></li>
                        <li><a href="#ChangingFloors">Changing Floors</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#Editing">Editing</a>
                    <ul>
                        <li><a href="#SelectingARoom">Selecting a Room</a></li>
                        <li><a href="#AddingARoom">Adding a Room</a></li>
                        <li><a href="#MovingARoom">Moving a Room</a></li>
                        <li><a href="#RotatingARoom">Rotating a Room</a></li>
                        <li><a href="#ChangingARoomsFloor">Changing an Elevator's Floor</a></li>
                        <li><a href="#DeletingARoom">Deleting a Room</a></li>
                        <li><a href="#DeletingEverything">Deleting Everything</a></li>
                        <li><a href="#UndoRedo">Undo and Redo</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#Constraints">Constraints</a>
                    <ul>
                        <li><a href="#RoomResources">Room Resources</a></li>
                        <li>
                            <a href="#RoomBoundaries">Room Boundaries</a>
                            <ul>
                                <li><a href="#SpecialNoteAboutDryDock">Special Note About the Dry Dock</a></li>
                                <li><a href="#SpecialNoteAboutDiscontinued">Special Note About the Discontinued Rooms</a></li>
                            </ul>
                        </li>
                        <li><a href="#RoomRules">Specific Room Rules</a></li>
                        <li><a href="#ConstraintFeedback">Other Constraint Feedback</a></li>
                        <li><a href="#Resources">Resources</a></li>
                    </ul>
                </li>
                <li><a href="#SavingAndSharing">Saving And Sharing</a></li>
                <li><a href="#ExportToPng">Exporting to PNG</a></li>
                <li><a href="#UpdateNotes">Update Notes</a></li>
                <li><a href="#ToDo">To Do</a></li>
                <li><a href="#KnownIssues">Known Issues</a></li>
            </ul>

            <h3 id="KeyboardShortcuts">Keyboard shortcut cheat sheet</h3>
            <ul>
                <li><strong>Shift-click</strong>: Rotate the selected room</li>
                <li><strong>R</strong>: Rotate the selected room (<i>works while dragging</i>)</li>
                <li><strong>D</strong>: Duplicate the selected room</li>
                <li><strong>Alt-click</strong>: Delete a room</li>
                <li><strong>Up arrow key</strong>: Move the view up a floor</li>
                <li><strong>Down arrow key</strong>: Move the view down a floor</li>
                <li><strong>Escape</strong>: Cancel adding/moving a room, cancel menu</li>
            </ul>
            <h1 id="Navigation">Navigation</h1>
            <p>
                Click and drag anywhere in the grid area to move around.
            </p>
            <p>
                This includes clicking on a room, as long as that room isn't currently selected (see
                <a href="#SelectingARoom">Selecting a Room</a>).
            </p>
            <p>
                If a room is selected and being dragged into position, then dragging near the window boundary will
                automatically scroll in that direction.  The closer the cursor is to the window boundary the faster
                the scrolling.
            </p>

            <h2 id="Xooming">Zooming</h2>
            <p>
                Use the mouse wheel to zoom in and out.  The cursor marks the center point for zooming.
            </p>
            <p>
                On a touch screen, pinch two fingers to zoom in or spread them to zoom out.
            </p>

            <h2 id="ChangingFloors">Changing Floors</h2>
            <p>
                The highlighted floor on the left side of the screen shows which floor is currently in view.
                The floor numbers start at <strong>1</strong> on the ground floor and go up from there.  Below floor
                <strong>1</strong> is <strong>B1</strong>, and they count down from there.
            </p>
            <p>
                Use the <span class="docImgButton"><img src="icons/icon-up.png" srcset="icons2x/icon-up.png 2x" title="Up"/></span> button above the floor listing to view the next floor up.
                Use the <span class="docImgButton"><img src="icons/icon-down.png" srcset="icons2x/icon-down.png 2x" title="Down"/></span> button to view the next floor down.
            </p>
            <p>
                You can also use the <strong>up</strong> and <strong>down</strong> arrow keys to move between floors.
            </p>
            <p>
                Click on a floor to go directly to it.
            </p>
            <p>
                The floor listing has a maximum number of floors it will display at one time.  If there is overflow
                on the top any/or bottom then the <span class="docImgButton"><img src="icons/icon-up.png" srcset="icons2x/icon-up.png 2x" title="Up"/></span>
                and/or <span class="docImgButton"><img src="icons/icon-down.png" srcset="icons2x/icon-down.png 2x" title="Down"/></span>
                buttons will be replaced with <span class="docImgButton"><img src="icons/icon-up-more.png" srcset="icons2x/icon-up-more.png 2x" title="Up"/></span>
                and/or <span class="docImgButton"><img src="icons/icon-down-more.png" srcset="icons2x/icon-down-more.png 2x" title="Down"/></span>
            </p>
            <p>
                Floors containing rooms with errors will be highlighted in <span class="docButton-error">red</span>.
            </p>

            <h1 id="Editing">Editing</h1>

            <h2 id="SelectingARoom">Selecting a Room</h2>
            <p>
                Select a room by clicking on it without dragging.  The currently selected room will have a blue
                outline around it.
            </p>
            <p>
                You can also click on a room that's not in the current floor but visible in the background in gray to go
                directly to that room's floor and select it.  <strong class="warn">Note that if there's a room on a
                floor directly above the room where you're trying to click then you will select that one instead, even
                if you can see the lower room through the holes in the upper one.</strong>
            </p>

            <h2 id="AddingARoom">Adding a Room</h2>
            <p>
                Click the <span class="docImgButton"><img src="icons/icon-add.png" srcset="icons2x/icon-add.png 2x" title="Add Room"/></span>
                button to show a menu of room categories.  Click one of these categories to show a menu of rooms.
                Click one of those rooms to add one under your cursor.  Drag and drop the room to where you want to
                place it.
            </p>
            <p>
                If you have already added a room once, then the <span class="docImgButton"><img src="icons/icon-add.png" srcset="icons2x/icon-add.png 2x" title="Add Room"/></span>
                menu will contain a quick option at the bottom to add another copy of the last room you added.
            </p>
            <p>
                Clicking again on the currently selected room will bring up a menu.  Click
                <span class="docButton">Duplicate</span> to create a copy of that room to place somewhere else.
            </p>
            <p>
                Hitting the <strong>D</strong> key when a room is selected will duplicate it without having to bring
                up the menu.
            </p>
            <p>
                Hitting <strong>Escape</strong> while dragging a newly created room for the first time will cancel the
                add operation and remove the room.
            </p>

            <h2 id="MovingARoom">Moving a Room</h2>
            <p>
                After selecting a room, click again and drag on that room to move it.
            </p>
            <p>
                Hold down <strong>Shift</strong> while dragging a room to snap its position to the nearest 8 meters
                on the grid.  Otherwise the room's position is snapped to the nearest meter.
            </p>
            <p>
                If you drag the room so one of its doors is close to another room's door that's facing the opposite
                direction, then your room will be snapped to that door.
            </p>
            <ul>
                <li>The zone of sensitivity with door snapping does not change with zoom.  If you're having trouble
                    snapping a room to the correct door then try zooming in.</li>
                <li>You can also control the priority of door snapping by clicking a point on the room closer to a
                    particular door when dragging.</li>
            </ul>
            <p>
                Note that <strong>Shift</strong>-dragging and door snapping also apply to newly created rooms that are
                in the process of being placed for the first time.
            </p>
            <p>
                Hitting <strong>Escape</strong> while dragging a room will cancel the operation and return the room
                to where it started.
            </p>

            <h2 id="RotatingARoom">Rotating a Room</h2>
            <p>
                Clicking again on the currently selected room will bring up a menu.  Click
                <span class="docImgButton"><img src="icons/icon-rotate-cw.png" srcset="icons2x/icon-rotate-cw.png 2x" title="Rotate"/></span>
                to rotate the room 90 degrees.
            </p>
            <p>
                Hold down <strong>Shift</strong> and click on the selected room to rotate it 90 degrees without
                having to bring up a menu.
            </p>
            <p>
                You can also press the <strong>R</strong> key to rotate the seleted room.  This also works while
                dragging the room.
            </p>

            <h2 id="ChangingARoomsFloor">Changing an Elevator's Floor</h2>
            <p>
                Elevators span two floors, either going up from the current floor or going down.  To switch which
                direction an elevator is going, select it and then click again to bring up a menu.  Select
                <span class="docImgButton"><img src="icons/icon-change-floor.png" srcset="icons2x/icon-change-floor.png 2x" title="Change Floor"/></span>
                to swap the direction the elevator is going.
            </p>

            <h2 id="DeletingARoom">Deleting a Room</h2>
            <p>
                Clicking again on the currently selected room will bring up a menu.  Click
                <span class="docImgButton"><img src="icons/icon-delete.png" srcset="icons2x/icon-delete.png 2x" title="Delete"/></span>
                to delete the room.
            </p>
            <p>
                Press the <strong>Delete</strong> key to delete the selected room without having to bring up a menu.
            </p>
            <p>
                Hold down <strong>Alt</strong> and click on a room to delete it with one click.
            </p>

            <h2 id="DeletingEverything">Deleting Everything</h2>
            <p>
                Click on <span class="docImgButton"><img src="icons/icon-burger.png" srcset="icons2x/icon-burger.png 2x" title="Menu"/></span>
                then <span class="docImgButton"><img src="icons/icon-new.png" srcset="icons2x/icon-new.png 2x" title="New"/></span>
                to start fresh.
            </p>
            <p>
                Note that this opens as a new link, so you can use your browser's <strong>Back</strong> button to go
                back to your previous layout.
            </p>

            <h2 id="UndoRedo">Undo and Redo</h2>
            <p>
                Click on <span class="docImgButton"><img src="icons/icon-undo.png" srcset="icons2x/icon-undo.png 2x" title="Undo"/></span>
                do undo your last action.  Actions include <strong>moving</strong>, <strong>rotating</strong>,
                <strong>changing floors</strong>, <strong>adding</strong>, and <strong>deleting</strong> a room.  You
                can continue clicking <span class="docImgButton"><img src="icons/icon-undo.png" srcset="icons2x/icon-undo.png 2x" title="Undo"/></span>
                to undo previous actions.
            </p>
            <p>
                Click <span class="docImgButton"><img src="icons/icon-redo.png" srcset="icons2x/icon-redo.png 2x" title="Redo"/></span>
                to redo an action you have just undone.  You can continue clicking
                <span class="docImgButton"><img src="icons/icon-undo.png" srcset="icons2x/icon-undo.png 2x" title="Undo"/></span>
                to redo previously undone actions.
            </p>
            <p>
                Performing another action after undoing will clear out all the redoable actions.
            </p>
            <p>
                <strong class="warn">You can undo a maximum of 100 actions.</strong>
            </p>

            <h1 id="Constraints">Constraints</h1>
            <p>
                There are three types on constraints on room placemement: <strong>Room Resources</strong>,
                <strong>Room Boundaries</strong>, and <strong>Room Rules</strong>.
            </p>

            <h2 id="RoomResources">Room Resources</h2>
            <p>
                There are three constraints that affect all rooms in the Dojo:
            </p>
            <ul>
                <li><strong>Room Count:</strong> There's a hard limit of 128 rooms total.</li>
                <li><strong>Energy:</strong> Each room requires some amount of Energy.  You must build
                    <strong>Reactors</strong> to increase the available energy.</li>
                <li><strong>Capacity:</strong> Each room requires some amount of Capacity.  You must build each
                    <strong>Clan Hall</strong> to get more capacity.</li>
            </ul>
            <p>
                The current Room count, Energy, and Capacity of your dojo is displayed in the lower left.  When any
                of those resources is exceeded it will be highlighted in <span class="docButton-error">red</span>.
            </p>

            <h2 id="RoomBoundaries">Room Boundaries</h2>
            <p>
                If you move a room too close to another room so that their boundaries overlap then they will be
                highlighted in <span class="docButton-error">red</span>.  The dojo layout is invalid as long as there
                are any room boundaries overlapping.
            </p>
            <p>
                Note that rooms on adjacent floors may also overlap boundaries.  If a currently visible room is
                overlapping with a room on a different floor then you will see just the other room's boundary in
                <span class="docButton-error">red</span>.
            </p>
            <h3 id="SpecialNoteAboutDryDock">Special Note About the Dry Dock</h3>
            <p>
                The Dry Dock is <strong>very big</strong>.  The outline and bounds visible on the Dry Dock do not
                extend all the way to the back of it, which extends roughly 6-7 times farther than the visible size of
                the Dry Dock.  Boundary collisions with the entire length of the Dry Dock will still be detected, but
                it may not be obvious what's colliding unless you zoom out and find the Dry Dock.
            </p>
            <h3 id="SpecialNoteAboutDiscontinued">Special Note About the Discontinued Rooms</h3>
            <p>
                The old, discontinued dojo rooms are available to place in your layout.  <strong class="warn">They come
                with a warning icon <span class="docImgButton-clear"><img src="icons/icon-warn.png" srcset="icons2x/icon-warn.png 2x" title="Warning"/></span>
                because there are number of caveats:</strong>
            </p>
            <p>
                Pretty much the only information I have about the discontinued rooms is from screenshots and data other
                players have provided.
            </p>
            <p>
                I can take a guess at boundary dimensions.  But knowing that the discontinued rooms do not
                follow a standard grid, my guesses are looser than usual.  All I know for sure is that they do not
                line up with each other or the newer rooms.
            </p>
            <p>
                I know that the <strong>Old Clan Hall</strong> provides the same energy and capacity as the starter
                <strong>Clan Hall</strong>, and that it's no wider than the starter <strong>Clan Hall</strong>.
                Everything else I'm assuming:
            </p>
            <ul>
                <li>
                    I'm assuming that the <strong>Old Reactor</strong> provides the same 25 energy as a newer reactor
                </li>
                <li>
                    For everything else I'm assuming they use zero energy and consume zero capacity.
                </li>
                <li>
                    I'm assuming all the old rooms have the height and depth of the starter <strong>Clan Hall</strong>.
                </li>
            </ul>

            <h2 id="RoomRules">Specific Room Rules</h2>
            <p>
                There are a handful of constraints that apply to specific rooms:
            </p>
            <ul>
                <li>You can only have one of each <strong>Clan Hall</strong></li>
                <li>You need at least one <strong>Clan Hall</strong></li>
                <li>
                    Each <strong>Clan Hall</strong> is the prerequisite for the next bigger <strong>Clan Hall</strong>
                    <ul><li>With the exception of the starter <strong>Hall</strong>, which can be demolished after
                        building the <strong>Clan Great Hall</strong></li></ul>
                </li>
                <li>An <strong>Oracle</strong> is the prequisite for all the Labs</li>
                <li>You can only have up to three <strong>Inspiration Halls</strong></li>
                <li>You can only have up to five <strong>Obstacle Course Architect</strong> rooms</li>
                <li>You can only have up to four <strong>Barracks</strong></li>
                <li>You can only have one <strong>Dry Dock</strong></li>
            </ul>
            <p>
                When a room is violating a specific rule then it will be highlighted in <span class="docButton-error">red</span>.
            </p>

            <h2 id="ConstraintFeedback">Other Constraint Feedback</h2>
            <p>
                When a room is violating a resource, boundary, or rule constraint it will be highlighted in <span class="docButton-error">red</span>.
                Clicking on the room twice to bring up the room menu.  Beside the room name will be a
                <span class="docImgButton-clear"><img src="icons/icon-error.png" srcset="icons2x/icon-error.png 2x" title="Error"/></span>
                button.  Clicking on it will bring up a list of the constraints that the room is breaking.
            </p>
            <p>
                The floor indicator along the left side of the screen will hightlight in <span class="docButton-error">red</span>
                any floors containing rooms with constraint violations.
            </p>
            <p>
                The <span class="docImgButton"><img src="icons/icon-add.png" srcset="icons2x/icon-add.png 2x" title="Add Room"/></span>
                menu will show <span class="docImgButton-clear"><img src="icons/icon-error.png" srcset="icons2x/icon-error.png 2x" title="Error"/></span>
                buttons next to rooms that will have a constraint violation if added.  This also applies to the
                <strong class="docButton">Duplicate</strong> option in the individual room menus.
            </p>
            <p>
                Finally, in the top bar there is a global error icon, either
                <span class="docImgButton-clear"><img src="icons/icon-ok.png" srcset="icons2x/icon-ok.png 2x" title="OK"/></span> or
                <span class="docImgButton-clear"><img src="icons/icon-error.png" srcset="icons2x/icon-error.png 2x" title="Error"/></span>.
                Click on it to bring up a list of all errors detected in the dojo.
            </p>

            <h2 id="Resources">Resources</h2>
            <p>
                When adding or duplicating a room, next to the energy and capacity constraints will be a
                <span class="docImgButton"><img src="icons/icon-resources.png" srcset="icons2x/icon-resources.png 2x" title="Resources"/></span>
                resources button.  Clicking this will display the resources needed to build that room, considering
                the current clan tier.
            </p>
            <p>
                At the bottom of the screen, next to the total rooms, energy, and capacity, is another
                <span class="docImgButton"><img src="icons/icon-resources.png" srcset="icons2x/icon-resources.png 2x" title="Resources"/></span>
                resources button.  Clicking this will display the total resources needed to build the entire dojo,
                considering the current clan tier.
            </p>
            <p>
                Clan tier is determined by how many Barracks rooms are present.  If the dojo contains Barracks then all
                resources displayed will be for the corresponding tier.  <span class="warn">Note that will be an
                overestimate; you're going to build at least some of your dojo before building any Barracks.</span>
            </p>

            <h1 id="SavingAndSharing">Saving And Sharing</h1>
            <p>
                The current layout and view are continually saved to your browser's location bar.
            </p>
            <ul>
                <li>To save your layout, bookmark the current page or copy the current URL from your browser's location
                    bar and save it somewhere.</li>
                <li>To load your layout, open your bookark or paste a previously saved URL into your browser's location
                    bar.</li>
                <li>If you go forward or back in your browser history, then reversing that should restore the layout and
                    view you had previously.</li>
            </ul>
            <p>
                A longcut to copying the URL is also available by clicking
                <span class="docImgButton"><img src="icons/icon-burger.png" srcset="icons2x/icon-burger.png 2x" title="Menu"/></span> then
                <span class="docImgButton"><img src="icons/icon-save.png" srcset="icons2x/icon-save.png 2x" title="Save"/></span>,
                then <strong class="docButton">Copy</strong>.
            </p>
            <h1 id="ExportToPng">Exporting to PNG</h1>
            <p>
                Click <span class="docImgButton"><img src="icons/icon-burger.png" srcset="icons2x/icon-burger.png 2x" title="Menu"/></span>
                then <span class="docImgButton"><img src="icons/icon-png.png" srcset="icons2x/icon-png.png 2x" title="PNG"/></span>
                to bring up a menu for exporting your dojo layout to one or
                more PNG files.
            </p>
            <ul>
                <li>
                    The <strong>Scale</strong> field controls the scale of the PNG image.  It's in
                    <strong>pixels per meter</strong>.  The larger the scale the bigger the image will be.
                </li>
                <li>
                    The <strong>Size</strong> field shows the size of the PNG(s) that will be generated.
                </li>
            </ul>
            <p>
                Click <strong class="docButton">Create</strong> to generate the PNG images.  They will be displayed as
                links for you to download.
            </p>
            <p>
                If your dojo has multiple floors then a separate image is generated for each floor.  The same size and
                positioning is used for each floors' image, so they will line up on top of each other.
            </p>
            <p>
                <strong class="warn">If you have a huge dojo and generate a huge image then it may take a little while
                    for the image links to appear.</strong>
            </p>

            <h1 id="UpdateNotes">Update Notes</h1>
            <h3 id="UpdateNotes1.1">v1.1: 2020-01-19</h3>
            <ul>
                <li>Added compression for the model string, it saves about 30-50% on the size of URLs.  All old URLs
                    will still work (thanks <strong>u/Almagnus1</strong>)</li>
                <li>Added wall displays for the Dry Dock 1 floor below and 3 floors above to make it more clear that
                    you can't build any rooms there (thanks <strong>u/Almagnus1</strong>)</li>
                <li>Adjusted rules for Hall prerequisites and added a new rule to make sure you have at least one hall
                    (Thanks <strong>u/yarl5000</strong>)</li>
                <li>Fixed lower boundary for Dry Dock (thanks <strong>(PC) KCToxic</strong>)</li>
                <li>Fixed boundary for Crimson Branch (thanks <strong>KingOfYou115</strong> and
                    <strong>u/Ramarr</strong>)</li>
                <li>Fixed the constraint on Obstacle Course Architect rooms to 5 instead of 3
                    (thanks <strong>u/Alighierian</strong>)</li>
                <li>
                    Added some keyboard shortcuts (thanks <strong>Kisutora</strong>):
                    <ul>
                        <li>Pressing <strong>R</strong> will now rotate the selected room.  Note that this also works
                            while dragging the room.  <i>Absolutely do not hold the R key down it is definitely not fun
                            at all ;)</i></li>
                        <li>Pressing <strong>D</strong> will now duplicate the selected room.</li>
                    </ul>
                </li>
                <li>Did some re-measurement of room upper/lower boundaries and re-testing of combinations
                    (thanks <strong>Zarzab</strong>)</li>
            </ul>
            <h3 id="UpdateNotes1.2">v1.2: 2020-01-22</h3>
            <ul>
                <li>Added my best guess at the old, discontinued rooms.  <strong class="warn">Note that the dimensions,
                    bounds and stats for these rooms are speculative at best.</strong>
                    (thanks <strong>(PC) ShadowMageAlpha</strong>, <strong>u/Ramarr</strong>)</li>
                <li>Added a less severe Warning system, currently only applies to the presence of discontinued rooms</li>
                <li>Added map icons for things that have map icons in-game</li>
                <li>Implemented auto-scrolling when dragging a room near the boundary of the window.</li>
                <li>Overhauled the menus, adding icons and close buttons and drop shadows and other cool crap.</li>
                <li>Added visible door markers when moving a room.</li>
            </ul>
            <h3 id="UpdateNotes1.3">v1.3: 2020-02-09</h3>
            <ul>
                <li>Now showing rooms that are not on the current floor in the background in gray.  Selecting a room now
                    always goes to the floor that room is on.  (thanks <strong>(PC) .--._---_.--_._.-</strong>)</li>
                <li>Shift-clicking a room automatically selects it for dragging, so you don't have to click every room
                    twice to move a bunch of rooms in a row.</li>
            </ul>
            <h3 id="UpdateNotes1.4">v1.4: 2020-02-13</h3>
            <ul>
                <li>Implemented undo/redo.</li>
                <li>Updated the boundary on the Obstacle Course Architect room (thanks <strong>yodaxep</strong>)</li>
                <li>Updated the Observatory with new slightly smaller bounds.</li>
                <li>Added a more efficient but goofball minimal dojo example (thanks <strong>Egdot</strong>)</li>
                <li>Updated the bounds on the Crimson Branch yet again and slightly updated the bounds on the Chem Lab
                    (thanks <strong>zaza7</strong>)</li>
                <li>Added the Open Space room</li>
                <li>Tweaked the bounds on the Obstacle Course Architect and Open Space rooms after further testing.
                    The Inspiration Hall now shows up on the floor above it in game.</li>
                <li>Added the Entrati Audience Chamber room</li>
                <li>Oh, Inspiration Halls can be spawn points</li>
                <li>Apparently the Entradi Audience Chamber can also be a spawn point</li>
                <li>Taking a few bites out of the starter hall bounding box (thanks <strong>wingcobob </strong>)</li>
                <li>Added an ideal decorator's example layout (thanks <strong>Vash</strong>)</li>
            </ul>
            <h3 id="UpdateNotes1.5">v1.5: 2020-10-29</h3>
            <ul>
                <li>Added room counts to all room menus.  Added room and total resource displays.</li>
            </ul>

            <h1 id="ToDo">To Do</h1>
            <ul>
                <li>Labels</li>
                <li>MULTISELECT</li>
                <li>
                    Tree structure like a real dojo
                    <ul>
                        <li>spawn point designation</li>
                        <li>disconnected rooms warning</li>
                        <li>Build order analysis</li>
                    </ul>
                </li>
                <li>
                    Add some actions for the error menus, i.e. clicking on the "Oracle is required" error creates an Oracle room to place.
                </li>
                <li>
                    Level of detail image sets for zoom levels
                </li>
                <li>
                    World peace
                </li>
            </ul>

            <h1 id="KnownIssues">Known Issues</h1>
            <ul>
                <li>
                    Pop-up menus have issues fitting itself entirely inside the screen sometimes.
                </li>
                <li>
                    If you're on a phone, the UI doesn't fit very well in landscape mode.
                </li>
                <li>
                    In Mobile Chrome you can still hide the URL bar and mess up the layout.
                </li>
                <li>
                    There are still some z-index issues, basically visible as a room you're dragging appearing to go
                    underneath other rooms.
                </li>
                <li>
                    Similarly, there are issues with trying to select a room that's within the bounding box of another
                    room
                </li>
                <li>
                    Clicking an internal link in the Help section in Chrome will flicker the screen, because some
                    things in Chrome are very stupid.  Possibly this also happens in mobile Safari, too.
                </li>
                <li>
                    Speaking of Safari, it pops when you switch floors to a floor with rooms off the screen.
                </li>
                <li>
                    PNGs exported with Safari look like ass.
                </li>
            </ul>
        </div>
    </div>
</div>

<div id="debugBar">
</div>

<!-- floating stats bar -->
<span id="statsBar">
    <span class="field"><span id="numRoomsStat" class="stat">0</span><img src="icons/icon-count.png" srcset="icons2x/icon-count.png 2x" title="Room Count"/></span>
    <span class="field"><span id="energyStat" class="stat">0</span><img src="icons/icon-energy.png" srcset="icons2x/icon-energy.png 2x" title="Energy"/></span>
    <span class="field"><span id="capacityStat" class="stat">0</span><img src="icons/icon-capacity.png" srcset="icons2x/icon-capacity.png 2x" title="Capacity"/></span>
    <span class="field clickable" onclick="showResources()"><img src="icons/icon-resources.png" srcset="icons2x/icon-resources.png 2x" title="Resources"/></span>
</span>

<!-- floating footer bar -->
<div id="footer">
    <span id="footerToggle" onclick="toggleFooter()"><img src="https://i.imgur.com/b5pNXKU.png" srcset="https://i.imgur.com/z6U8Oxs.png 2x"/></span>
</div>

</body>
</html>